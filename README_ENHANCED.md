# mem0 LTM 시스템 - 강화된 버전

## 🎯 주요 개선사항

### 메모리를 실제로 활용하는 대화 시스템
이제 저장된 메모리가 단순히 저장만 되는 것이 아니라, **실제 대화에서 활용**됩니다!

## 🚀 빠른 시작

### 1. 시스템 테스트
```bash
# 강화된 채팅 서비스 테스트
python test_enhanced_chat.py
```

### 2. 웹 애플리케이션 실행
```bash
streamlit run app.py
```

## 📋 핵심 기능

### 1. **EnhancedChatService** - 메모리 활용 채팅
- `core/chat_service_enhanced.py`
- 저장된 메모리를 실제로 대화에 활용
- 사용자 정보, 선호도, 경험을 바탕으로 개인화된 응답 생성

### 2. **메모리 컨텍스트 구성**
대화 시 다음 정보들을 자동으로 활용:
- **사용자 정보**: 이름, 나이, 직업 등
- **선호도**: 좋아하는 것, 싫어하는 것
- **과거 경험**: 여행, 활동, 이벤트
- **관련 정보**: 현재 대화와 관련된 과거 메모리

### 3. **자동 정보 추출**
대화 중 중요한 정보를 자동으로 감지하고 저장:
- 개인정보 패턴 인식
- 선호도 추출
- 경험 기록

## 🧪 테스트 방법

### 1. 메모리 저장 테스트
```python
# 웹 UI에서 수동으로 메모리 추가
"제 이름은 홍길동입니다"
"저는 커피를 좋아합니다"
"저는 개발자입니다"
```

### 2. 메모리 활용 확인
```python
# 다음과 같은 질문으로 테스트
"안녕하세요! 제 이름 기억하시나요?"
"제가 좋아하는 것에 대해 말씀해주세요"
"제 직업과 관련된 조언을 해주세요"
```

### 3. 예상 결과
- **메모리 활용 O**: "네, 홍길동님! 커피를 좋아하시는 개발자시군요."
- **메모리 활용 X**: "죄송하지만 당신의 이름을 모르겠습니다."

## 🔍 동작 확인 방법

### 1. 콘솔 로그 확인
```
메모리 검색 중: [사용자 메시지]
메모리 컨텍스트: === 사용자 정보 ===...
```

### 2. 웹 UI에서 확인
- 응답 아래 "🔍 참조된 메모리" 확장 버튼 클릭
- 실제로 사용된 메모리 확인 가능

### 3. 테스트 스크립트 실행
```bash
python test_enhanced_chat.py
```

## 📝 주요 파일 구조

```
mem0-test/
├── core/
│   ├── chat_service_enhanced.py  # ⭐ 메모리 활용 채팅 서비스
│   ├── memory_manager_simple.py  # 간소화된 메모리 매니저
│   └── classification_service.py # 자동 분류 서비스
├── app.py                        # Streamlit 웹 UI (강화된 서비스 사용)
├── test_enhanced_chat.py         # 메모리 활용 테스트
└── data/
    └── local_memories.json       # 로컬 메모리 백업
```

## 🎯 사용 시나리오

### 시나리오 1: 첫 만남
1. "안녕하세요, 저는 김철수입니다. 30살 개발자예요."
2. → 시스템이 이름, 나이, 직업 자동 저장
3. 다음 대화: "제 이름 기억하시나요?"
4. → "네, 김철수님! 30살 개발자시군요."

### 시나리오 2: 선호도 기반 추천
1. "저는 커피를 좋아하고 매운 음식은 싫어해요."
2. → 시스템이 선호도 자동 저장
3. 다음 대화: "점심 메뉴 추천해주세요"
4. → "김철수님은 매운 음식을 싫어하시니, 담백한 메뉴를 추천드릴게요..."

### 시나리오 3: 경험 활용
1. "작년에 제주도 여행 다녀왔어요."
2. → 시스템이 경험 자동 저장
3. 다음 대화: "여행 조언 부탁드려요"
4. → "작년에 제주도 다녀오셨군요! 이번엔 다른 지역은 어떠세요?"

## ⚠️ 주의사항

1. **Ollama 실행 필수**
   ```bash
   ollama serve
   ```

2. **첫 실행 시 설정**
   ```bash
   python setup_models.py
   ```

3. **메모리가 많아질수록 응답 시간 증가**
   - 적절한 메모리 관리 필요
   - 오래된/불필요한 메모리 정기 삭제

## 🐛 문제 해결

### 메모리가 활용되지 않는 경우
1. `test_enhanced_chat.py` 실행으로 동작 확인
2. `app.py`에서 `EnhancedChatService` 사용 확인
3. 로그에서 "메모리 컨텍스트" 생성 확인

### 응답이 느린 경우
1. 메모리 수 확인 (너무 많으면 정리)
2. Ollama 모델 확인 (더 가벼운 모델 사용)
3. `limit` 파라미터 조정

## 📚 추가 개선 아이디어

1. **메모리 우선순위**: 최신/중요 메모리 우선 활용
2. **메모리 요약**: 긴 메모리를 요약하여 저장
3. **메모리 관계**: 메모리 간 연결 관계 생성
4. **메모리 시각화**: 메모리 맵/그래프 표시

---

이제 메모리가 실제로 대화에 활용됩니다! 🎉